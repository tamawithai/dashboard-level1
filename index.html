<!DOCTYPE html>
<html lang="id" class="dark-mode">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Val: Dashboard Evaluasi</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2 class="sidebar-title">E-Val</h2>
            <button class="toggle-btn" id="toggle-sidebar-btn">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <ul class="menu-list">
            <li class="menu-item active" id="menu-dashboard">
                <a href="#">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="menu-item" id="menu-laporan">
                <a href="#">
                     <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/></svg>
                    <span>Laporan Detail</span>
                </a>
            </li>
             <li class="menu-item" id="data-source-menu">
                <a href="#">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M9 3C7.9 3 7 3.9 7 5v14c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H9zm0 2h8v14H9V5zm-4 2v12c0 1.1.9 2 2 2h.5v-2H5V7h.5V5H5c-1.1 0-2 .9-2 2z"/></svg>
                    <span>Sumber Data</span>
                </a>
            </li>
        </ul>
        <div class="sidebar-footer">
             <button id="theme-toggle" class="theme-button">
                 <svg id="theme-icon" class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg>
                 <span class="theme-button-text">Mode Terang</span>
             </button>
        </div>
    </div>
    <div class="main-content" id="main-content">
        <!-- KONTEN DASHBOARD -->
        <div id="page-dashboard">
            <header>
                <h1>Dashboard</h1>
                <p class="subtitle">Monitoring Evaluasi Pelatihan Level 1</p>
            </header>
            <main>
                <div class="grid-container">
                    <div class="card highlight">
                        <h2>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg>
                            Skor Akhir
                        </h2>
                        <p class="skor-akhir-angka" id="skor-akhir">0.00</p>
                        <p class="skor-akhir-skala">dari 5.00</p>
                        <p id="skor-kategori"></p>
                    </div>
                    <div class="card">
                        <h2>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                            Jumlah Responden
                        </h2>
                        <p class="angka-metrik" id="jumlah-responden">0</p>
                    </div>
                    <div class="card chart-card">
                        <h2>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"/><path d="M18.7 8a6 6 0 0 0-6-6H3"/><path d="M14 15a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"/></svg>
                            Penilaian Rata-rata per Aspek
                        </h2>
                        <canvas id="chart-aspek-utama"></canvas>
                    </div>
                    <div class="card detail-card" id="detail-section">
                        <h2 id="detail-title">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>
                            Rincian Aspek
                        </h2>
                        <div id="detail-content">
                            <p style="text-align: center; color: var(--warna-teks-sekunder);">Klik pada salah satu batang grafik untuk menampilkan detail.</p>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- KONTEN LAPORAN DETAIL (AWALNYA TERSEMBUNYI) -->
        <div id="page-laporan-detail" class="hidden">
            <header>
                <h1>Laporan Detail</h1>
                <p class="subtitle">Data mentah dari setiap responden.</p>
            </header>
            <main>
                <div class="card">
                    <div class="table-container" id="laporan-table-container">
                        <!-- Tabel akan dibuat oleh JavaScript di sini -->
                    </div>
                </div>
            </main>
        </div>

        <footer>
            <p>Pusat Pelatihan Kementerian | &copy; 2025</p>
        </footer>
    </div>
    <div class="modal-overlay" id="data-source-modal">
        <div class="modal-content">
            <h2>Pengaturan Sumber Data</h2>
            <p>Salin URL dari Google Form Response Sheet yang telah dipublikasikan ke web sebagai file .csv.</p>
            <label for="url-input">URL Google Sheet (.csv)</label>
            <input type="text" id="url-input" placeholder="Tempel URL di sini...">
            <div class="modal-actions">
                <button id="cancel-btn">Batal</button>
                <button id="save-url-btn">Simpan & Muat Ulang</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
    <script src="script.js"></script>
</body>
</html>